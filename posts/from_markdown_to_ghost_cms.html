<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="icon" href="/favicon.ico" data-next-head=""/><meta name="description" content="A blog about software engineering, cybersecurity, and other topics." data-next-head=""/><meta name="og:title" content="Notes for the future" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><title data-next-head="">Creating a Ghost CMS Site from markdown files</title><link rel="preload" href="/durosyan/_next/static/css/47b9607137cbc887.css" as="style"/><link rel="stylesheet" href="/durosyan/_next/static/css/47b9607137cbc887.css" data-n-g=""/><link rel="preload" href="/durosyan/_next/static/css/2baac192d5660853.css" as="style"/><link rel="stylesheet" href="/durosyan/_next/static/css/2baac192d5660853.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/durosyan/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/durosyan/_next/static/chunks/webpack-8c38c42c65c02f93.js" defer=""></script><script src="/durosyan/_next/static/chunks/framework-052b50cd3d4947f2.js" defer=""></script><script src="/durosyan/_next/static/chunks/main-b5db07c2d9c05fb0.js" defer=""></script><script src="/durosyan/_next/static/chunks/pages/_app-8b2b478b1c32f058.js" defer=""></script><script src="/durosyan/_next/static/chunks/111-b6d228a460ce1844.js" defer=""></script><script src="/durosyan/_next/static/chunks/853-cd8f1d40d2155ed5.js" defer=""></script><script src="/durosyan/_next/static/chunks/pages/posts/%5Bid%5D-f7588ef31079323e.js" defer=""></script><script src="/durosyan/_next/static/uZAnH4RiZeTKWOuPga4hs/_buildManifest.js" defer=""></script><script src="/durosyan/_next/static/uZAnH4RiZeTKWOuPga4hs/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_container__FUycR"><header class="layout_header__SFlEE"></header><main><article><h1>Creating a Ghost CMS Site from markdown files</h1><div><time dateTime="2025-01-15">January 15, 2025</time></div><div><p>This script accepts a directory of markdown files and publishes them to a ghost cms instance.</p>
<p>This is a good way to publish a whole raft of notes very quickly if you have a ghost cms instance setup.</p>
<p>I used this template on github: <a href="https://github.com/clean-docker/ghost-cms">clean-docker/ghost-cms</a></p>
<p>This was simply a test to see if it was possible to do this. which it was, unfortunately it doesn't handle snippets very well, and simply ignores syntax highlighting as well as code formatting.</p>
<div class="hl hl-python"><div class="hl-header"><div class="hl-language"><span>python</span></div></div><pre id="MC4wNjQ4ODQz" style="--hl-line-number-gutter-factor: 2"><code tabindex="0"><span class="line"><span class="line-number" aria-hidden="true">1</span><span class="pl-k">import</span> requests</span>
<span class="line"><span class="line-number" aria-hidden="true">2</span><span class="pl-k">import</span> markdown2</span>
<span class="line"><span class="line-number" aria-hidden="true">3</span><span class="pl-k">import</span> jwt</span>
<span class="line"><span class="line-number" aria-hidden="true">4</span><span class="pl-k">import</span> datetime</span>
<span class="line"><span class="line-number" aria-hidden="true">5</span><span class="pl-k">import</span> os</span>
<span class="line"><span class="line-number" aria-hidden="true">6</span></span>
<span class="line"><span class="line-number" aria-hidden="true">7</span><span class="pl-c"># Replace these with your Ghost CMS details</span></span>
<span class="line"><span class="line-number" aria-hidden="true">8</span>api_url <span class="pl-k">=</span> os.getenv(<span class="pl-s"><span class="pl-pds">'</span>GHOST_API_URL<span class="pl-pds">'</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">9</span>admin_api_key <span class="pl-k">=</span> os.getenv(<span class="pl-s"><span class="pl-pds">'</span>GHOST_ADMIN_KEY<span class="pl-pds">'</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">10</span></span>
<span class="line"><span class="line-number" aria-hidden="true">11</span><span class="pl-k">def</span> <span class="pl-en">markdown_to_html</span>(<span class="pl-smi">file_path</span>):</span>
<span class="line"><span class="line-number" aria-hidden="true">12</span>    <span class="pl-c"># Extract the title from the file name</span></span>
<span class="line"><span class="line-number" aria-hidden="true">13</span>    title <span class="pl-k">=</span> file_path.split(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>)[<span class="pl-k">-</span><span class="pl-c1">1</span>].replace(<span class="pl-s"><span class="pl-pds">'</span>_<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>).replace(<span class="pl-s"><span class="pl-pds">'</span>.md<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">''</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">14</span>    <span class="pl-c"># Read the markdown file</span></span>
<span class="line"><span class="line-number" aria-hidden="true">15</span>    <span class="pl-k">with</span> <span class="pl-c1">open</span>(file_path, <span class="pl-s"><span class="pl-pds">'</span>r<span class="pl-pds">'</span></span>) <span class="pl-k">as</span> <span class="pl-v">file</span>:</span>
<span class="line"><span class="line-number" aria-hidden="true">16</span>        lines <span class="pl-k">=</span> <span class="pl-v">file</span>.readlines()</span>
<span class="line"><span class="line-number" aria-hidden="true">17</span>    <span class="pl-c"># Remove the first line</span></span>
<span class="line"><span class="line-number" aria-hidden="true">18</span>    content <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">''</span></span>.join(lines[<span class="pl-c1">1</span>:])</span>
<span class="line"><span class="line-number" aria-hidden="true">19</span>    <span class="pl-c"># Convert markdown to HTML</span></span>
<span class="line"><span class="line-number" aria-hidden="true">20</span>    html <span class="pl-k">=</span> markdown2.markdown(content)</span>
<span class="line"><span class="line-number" aria-hidden="true">21</span>    <span class="pl-k">return</span> title, html</span>
<span class="line"><span class="line-number" aria-hidden="true">22</span></span>
<span class="line"><span class="line-number" aria-hidden="true">23</span><span class="pl-k">def</span> <span class="pl-en">process_markdown_directory</span>(<span class="pl-smi">directory_path</span>):</span>
<span class="line"><span class="line-number" aria-hidden="true">24</span>    results <span class="pl-k">=</span> []</span>
<span class="line"><span class="line-number" aria-hidden="true">25</span>    <span class="pl-k">for</span> file_name <span class="pl-k">in</span> os.listdir(directory_path):</span>
<span class="line"><span class="line-number" aria-hidden="true">26</span>        <span class="pl-k">if</span> file_name.endswith(<span class="pl-s"><span class="pl-pds">'</span>.md<span class="pl-pds">'</span></span>):</span>
<span class="line"><span class="line-number" aria-hidden="true">27</span>            file_path <span class="pl-k">=</span> os.path.join(directory_path, file_name)</span>
<span class="line"><span class="line-number" aria-hidden="true">28</span>            title, html <span class="pl-k">=</span> markdown_to_html(file_path)</span>
<span class="line"><span class="line-number" aria-hidden="true">29</span>            results.append((title, html))</span>
<span class="line"><span class="line-number" aria-hidden="true">30</span>    <span class="pl-k">return</span> results</span>
<span class="line"><span class="line-number" aria-hidden="true">31</span></span>
<span class="line"><span class="line-number" aria-hidden="true">32</span><span class="pl-c"># Function to create a JWT token</span></span>
<span class="line"><span class="line-number" aria-hidden="true">33</span><span class="pl-k">def</span> <span class="pl-en">create_jwt</span>(<span class="pl-smi">api_key</span>):</span>
<span class="line"><span class="line-number" aria-hidden="true">34</span>    key_id, secret <span class="pl-k">=</span> api_key.split(<span class="pl-s"><span class="pl-pds">'</span>:<span class="pl-pds">'</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">35</span>    iat <span class="pl-k">=</span> <span class="pl-c1">int</span>(datetime.datetime.now().timestamp())</span>
<span class="line"><span class="line-number" aria-hidden="true">36</span>    header <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>alg<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>HS256<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>kid<span class="pl-pds">'</span></span>: key_id}</span>
<span class="line"><span class="line-number" aria-hidden="true">37</span>    payload <span class="pl-k">=</span> {</span>
<span class="line"><span class="line-number" aria-hidden="true">38</span>        <span class="pl-s"><span class="pl-pds">'</span>iat<span class="pl-pds">'</span></span>: iat,</span>
<span class="line"><span class="line-number" aria-hidden="true">39</span>        <span class="pl-s"><span class="pl-pds">'</span>exp<span class="pl-pds">'</span></span>: iat <span class="pl-k">+</span> <span class="pl-c1">300</span>,</span>
<span class="line"><span class="line-number" aria-hidden="true">40</span>        <span class="pl-s"><span class="pl-pds">'</span>aud<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>/v3/admin/<span class="pl-pds">'</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">41</span>    }</span>
<span class="line"><span class="line-number" aria-hidden="true">42</span>    token <span class="pl-k">=</span> jwt.encode(payload, <span class="pl-c1">bytes</span>.fromhex(secret), <span class="pl-v">algorithm</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>HS256<span class="pl-pds">'</span></span>, <span class="pl-v">headers</span><span class="pl-k">=</span>header)</span>
<span class="line"><span class="line-number" aria-hidden="true">43</span>    <span class="pl-k">return</span> token</span>
<span class="line"><span class="line-number" aria-hidden="true">44</span></span>
<span class="line"><span class="line-number" aria-hidden="true">45</span>results <span class="pl-k">=</span> process_markdown_directory(<span class="pl-s"><span class="pl-pds">'</span>./content<span class="pl-pds">'</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">46</span>jwt_token <span class="pl-k">=</span> create_jwt(admin_api_key)</span>
<span class="line"><span class="line-number" aria-hidden="true">47</span><span class="pl-k">for</span> title, html <span class="pl-k">in</span> results:</span>
<span class="line"><span class="line-number" aria-hidden="true">48</span>    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-k">f</span><span class="pl-pds">"</span>Title: </span><span class="pl-c1">{</span>title<span class="pl-c1">}</span><span class="pl-s"><span class="pl-pds">"</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">49</span>    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-k">f</span><span class="pl-pds">"</span>HTML: </span><span class="pl-c1">{</span>html<span class="pl-c1">}</span><span class="pl-cce">\n</span><span class="pl-s"><span class="pl-pds">"</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">50</span>    <span class="pl-c"># Post data</span></span>
<span class="line"><span class="line-number" aria-hidden="true">51</span>    post_data <span class="pl-k">=</span> {</span>
<span class="line"><span class="line-number" aria-hidden="true">52</span>        <span class="pl-s"><span class="pl-pds">'</span>posts<span class="pl-pds">'</span></span>: [{</span>
<span class="line"><span class="line-number" aria-hidden="true">53</span>            <span class="pl-s"><span class="pl-pds">'</span>title<span class="pl-pds">'</span></span>: title,</span>
<span class="line"><span class="line-number" aria-hidden="true">54</span>            <span class="pl-s"><span class="pl-pds">'</span>html<span class="pl-pds">'</span></span>: html,</span>
<span class="line"><span class="line-number" aria-hidden="true">55</span>            <span class="pl-s"><span class="pl-pds">'</span>status<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>draft<span class="pl-pds">'</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">56</span>        }]</span>
<span class="line"><span class="line-number" aria-hidden="true">57</span>    }</span>
<span class="line"><span class="line-number" aria-hidden="true">58</span>    headers <span class="pl-k">=</span> {</span>
<span class="line"><span class="line-number" aria-hidden="true">59</span>        <span class="pl-s"><span class="pl-pds">'</span>Authorization<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-k">f</span><span class="pl-pds">'</span>Ghost </span><span class="pl-c1">{</span>jwt_token<span class="pl-c1">}</span><span class="pl-s"><span class="pl-pds">'</span></span>,</span>
<span class="line"><span class="line-number" aria-hidden="true">60</span>        <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">61</span>    }</span>
<span class="line"><span class="line-number" aria-hidden="true">62</span>    response <span class="pl-k">=</span> requests.post(api_url, <span class="pl-v">json</span><span class="pl-k">=</span>post_data, <span class="pl-v">headers</span><span class="pl-k">=</span>headers)</span>
<span class="line"><span class="line-number" aria-hidden="true">63</span>    <span class="pl-k">if</span> response.status_code <span class="pl-k">==</span> <span class="pl-c1">201</span>:</span>
<span class="line"><span class="line-number" aria-hidden="true">64</span>        <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>Post created successfully!<span class="pl-pds">'</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">65</span>    <span class="pl-k">else</span>:</span>
<span class="line"><span class="line-number" aria-hidden="true">66</span>        <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-k">f</span><span class="pl-pds">'</span>Failed to create post: </span><span class="pl-c1">{</span>response.status_code<span class="pl-c1">}</span><span class="pl-s"><span class="pl-pds">'</span></span>)</span>
<span class="line"><span class="line-number" aria-hidden="true">67</span>        <span class="pl-c1">print</span>(response.json())</span>
</code></pre></div></div></article></main><div class="layout_backToHome__D9QFr"><a href="/durosyan">â† Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"from_markdown_to_ghost_cms","contentHtml":"\u003cp\u003eThis script accepts a directory of markdown files and publishes them to a ghost cms instance.\u003c/p\u003e\n\u003cp\u003eThis is a good way to publish a whole raft of notes very quickly if you have a ghost cms instance setup.\u003c/p\u003e\n\u003cp\u003eI used this template on github: \u003ca href=\"https://github.com/clean-docker/ghost-cms\"\u003eclean-docker/ghost-cms\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis was simply a test to see if it was possible to do this. which it was, unfortunately it doesn't handle snippets very well, and simply ignores syntax highlighting as well as code formatting.\u003c/p\u003e\n\u003cdiv class=\"hl hl-python\"\u003e\u003cdiv class=\"hl-header\"\u003e\u003cdiv class=\"hl-language\"\u003e\u003cspan\u003epython\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\u003cpre id=\"MC4wNjQ4ODQz\" style=\"--hl-line-number-gutter-factor: 2\"\u003e\u003ccode tabindex=\"0\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e1\u003c/span\u003e\u003cspan class=\"pl-k\"\u003eimport\u003c/span\u003e requests\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e2\u003c/span\u003e\u003cspan class=\"pl-k\"\u003eimport\u003c/span\u003e markdown2\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e3\u003c/span\u003e\u003cspan class=\"pl-k\"\u003eimport\u003c/span\u003e jwt\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e4\u003c/span\u003e\u003cspan class=\"pl-k\"\u003eimport\u003c/span\u003e datetime\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e5\u003c/span\u003e\u003cspan class=\"pl-k\"\u003eimport\u003c/span\u003e os\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e6\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e7\u003c/span\u003e\u003cspan class=\"pl-c\"\u003e# Replace these with your Ghost CMS details\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e8\u003c/span\u003eapi_url \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e os.getenv(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eGHOST_API_URL\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e9\u003c/span\u003eadmin_api_key \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e os.getenv(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eGHOST_ADMIN_KEY\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e10\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e11\u003c/span\u003e\u003cspan class=\"pl-k\"\u003edef\u003c/span\u003e \u003cspan class=\"pl-en\"\u003emarkdown_to_html\u003c/span\u003e(\u003cspan class=\"pl-smi\"\u003efile_path\u003c/span\u003e):\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e12\u003c/span\u003e    \u003cspan class=\"pl-c\"\u003e# Extract the title from the file name\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e13\u003c/span\u003e    title \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e file_path.split(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e/\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)[\u003cspan class=\"pl-k\"\u003e-\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e1\u003c/span\u003e].replace(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e_\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e).replace(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e.md\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e''\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e14\u003c/span\u003e    \u003cspan class=\"pl-c\"\u003e# Read the markdown file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e15\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003ewith\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eopen\u003c/span\u003e(file_path, \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003er\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e) \u003cspan class=\"pl-k\"\u003eas\u003c/span\u003e \u003cspan class=\"pl-v\"\u003efile\u003c/span\u003e:\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e16\u003c/span\u003e        lines \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-v\"\u003efile\u003c/span\u003e.readlines()\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e17\u003c/span\u003e    \u003cspan class=\"pl-c\"\u003e# Remove the first line\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e18\u003c/span\u003e    content \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e''\u003c/span\u003e\u003c/span\u003e.join(lines[\u003cspan class=\"pl-c1\"\u003e1\u003c/span\u003e:])\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e19\u003c/span\u003e    \u003cspan class=\"pl-c\"\u003e# Convert markdown to HTML\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e20\u003c/span\u003e    html \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e markdown2.markdown(content)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e21\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e title, html\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e22\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e23\u003c/span\u003e\u003cspan class=\"pl-k\"\u003edef\u003c/span\u003e \u003cspan class=\"pl-en\"\u003eprocess_markdown_directory\u003c/span\u003e(\u003cspan class=\"pl-smi\"\u003edirectory_path\u003c/span\u003e):\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e24\u003c/span\u003e    results \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e []\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e25\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003efor\u003c/span\u003e file_name \u003cspan class=\"pl-k\"\u003ein\u003c/span\u003e os.listdir(directory_path):\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e26\u003c/span\u003e        \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e file_name.endswith(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e.md\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e):\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e27\u003c/span\u003e            file_path \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e os.path.join(directory_path, file_name)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e28\u003c/span\u003e            title, html \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e markdown_to_html(file_path)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e29\u003c/span\u003e            results.append((title, html))\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e30\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e results\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e31\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e32\u003c/span\u003e\u003cspan class=\"pl-c\"\u003e# Function to create a JWT token\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e33\u003c/span\u003e\u003cspan class=\"pl-k\"\u003edef\u003c/span\u003e \u003cspan class=\"pl-en\"\u003ecreate_jwt\u003c/span\u003e(\u003cspan class=\"pl-smi\"\u003eapi_key\u003c/span\u003e):\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e34\u003c/span\u003e    key_id, secret \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e api_key.split(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e:\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e35\u003c/span\u003e    iat \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eint\u003c/span\u003e(datetime.datetime.now().timestamp())\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e36\u003c/span\u003e    header \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e {\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ealg\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eHS256\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ekid\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: key_id}\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e37\u003c/span\u003e    payload \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e {\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e38\u003c/span\u003e        \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eiat\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: iat,\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e39\u003c/span\u003e        \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eexp\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: iat \u003cspan class=\"pl-k\"\u003e+\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e300\u003c/span\u003e,\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e40\u003c/span\u003e        \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eaud\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e/v3/admin/\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e41\u003c/span\u003e    }\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e42\u003c/span\u003e    token \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e jwt.encode(payload, \u003cspan class=\"pl-c1\"\u003ebytes\u003c/span\u003e.fromhex(secret), \u003cspan class=\"pl-v\"\u003ealgorithm\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eHS256\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-v\"\u003eheaders\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e=\u003c/span\u003eheader)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e43\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e token\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e44\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e45\u003c/span\u003eresults \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e process_markdown_directory(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e./content\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e46\u003c/span\u003ejwt_token \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e create_jwt(admin_api_key)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e47\u003c/span\u003e\u003cspan class=\"pl-k\"\u003efor\u003c/span\u003e title, html \u003cspan class=\"pl-k\"\u003ein\u003c/span\u003e results:\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e48\u003c/span\u003e    \u003cspan class=\"pl-c1\"\u003eprint\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-k\"\u003ef\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eTitle: \u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e{\u003c/span\u003etitle\u003cspan class=\"pl-c1\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e49\u003c/span\u003e    \u003cspan class=\"pl-c1\"\u003eprint\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-k\"\u003ef\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eHTML: \u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e{\u003c/span\u003ehtml\u003cspan class=\"pl-c1\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-cce\"\u003e\\n\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e50\u003c/span\u003e    \u003cspan class=\"pl-c\"\u003e# Post data\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e51\u003c/span\u003e    post_data \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e {\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e52\u003c/span\u003e        \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eposts\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: [{\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e53\u003c/span\u003e            \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003etitle\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: title,\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e54\u003c/span\u003e            \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ehtml\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: html,\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e55\u003c/span\u003e            \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003estatus\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003edraft\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e56\u003c/span\u003e        }]\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e57\u003c/span\u003e    }\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e58\u003c/span\u003e    headers \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e {\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e59\u003c/span\u003e        \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eAuthorization\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-k\"\u003ef\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eGhost \u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e{\u003c/span\u003ejwt_token\u003cspan class=\"pl-c1\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e60\u003c/span\u003e        \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eContent-Type\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eapplication/json\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e61\u003c/span\u003e    }\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e62\u003c/span\u003e    response \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e requests.post(api_url, \u003cspan class=\"pl-v\"\u003ejson\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e=\u003c/span\u003epost_data, \u003cspan class=\"pl-v\"\u003eheaders\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e=\u003c/span\u003eheaders)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e63\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e response.status_code \u003cspan class=\"pl-k\"\u003e==\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e201\u003c/span\u003e:\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e64\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eprint\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003ePost created successfully!\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e65\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003eelse\u003c/span\u003e:\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e66\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eprint\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-k\"\u003ef\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003eFailed to create post: \u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e{\u003c/span\u003eresponse.status_code\u003cspan class=\"pl-c1\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e67\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eprint\u003c/span\u003e(response.json())\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Creating a Ghost CMS Site from markdown files","date":"2025-01-15","tags":"ghost cms, markdown, tinkering, snippets"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"from_markdown_to_ghost_cms"},"buildId":"uZAnH4RiZeTKWOuPga4hs","assetPrefix":"/durosyan","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>