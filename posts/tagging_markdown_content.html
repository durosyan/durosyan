<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="icon" href="/favicon.ico" data-next-head=""/><meta name="description" content="A blog about software engineering, cybersecurity, and other topics." data-next-head=""/><meta name="og:title" content="Notes for ryan" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><title data-next-head="">Tagging markdown content</title><link rel="preload" href="/plausible-denial/_next/static/css/fe53a19777309f0b.css" as="style"/><link rel="stylesheet" href="/plausible-denial/_next/static/css/fe53a19777309f0b.css" data-n-g=""/><link rel="preload" href="/plausible-denial/_next/static/css/52f1141310769d69.css" as="style"/><link rel="stylesheet" href="/plausible-denial/_next/static/css/52f1141310769d69.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/plausible-denial/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/plausible-denial/_next/static/chunks/webpack-1d2146f2f87d0d61.js" defer=""></script><script src="/plausible-denial/_next/static/chunks/framework-052b50cd3d4947f2.js" defer=""></script><script src="/plausible-denial/_next/static/chunks/main-c679951d4d57c5fb.js" defer=""></script><script src="/plausible-denial/_next/static/chunks/pages/_app-8b2b478b1c32f058.js" defer=""></script><script src="/plausible-denial/_next/static/chunks/111-b6d228a460ce1844.js" defer=""></script><script src="/plausible-denial/_next/static/chunks/853-cd8f1d40d2155ed5.js" defer=""></script><script src="/plausible-denial/_next/static/chunks/pages/posts/%5Bid%5D-1f93d43080498cd7.js" defer=""></script><script src="/plausible-denial/_next/static/uMTsqovISolJsx25sdzq8/_buildManifest.js" defer=""></script><script src="/plausible-denial/_next/static/uMTsqovISolJsx25sdzq8/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_container__FUycR"><header class="layout_header__SFlEE"><div class="layout_headerBorder__4fKYf"><div class="layout_headerBox__e2QEL"><h1 class="utils_heading2Xl__oxFoJ">Ryans Notes</h1></div></div><nav class="layout_nav__R8qNp"><ul><li class=""><a href="/plausible-denial">Blog</a></li><li class=""><a href="/plausible-denial/about">About</a></li><li class=""><a href="/plausible-denial/tags">Tags</a></li></ul></nav></header><main><article><h1 class="utils_headingXl__zlq1q">Tagging markdown content</h1><div class="utils_lightText__B_gv3"><time dateTime="2025-01-15">January 15, 2025</time></div><div><p>I had a bunch of markdown files filled with notes that I wanted to add to my blog. The challenge was to tag each file with relevant topics. To tackle this, I decided to use a language model and wrote a bash script to automate the tagging process.</p>
<p>Now, all my markdown notes are semantically tagged and ready for the blog! However, there's a small hiccup: all the metadata dates are the same, which looks odd. But that's okay — I plan to review and post each blog entry gradually anyway.</p>
<div class="hl hl-bash"><div class="hl-header"><div class="hl-language"><span>bash</span></div></div><pre id="MC43NzI0NTI5" style="--hl-line-number-gutter-factor: 2"><code tabindex="0"><span class="line"><span class="line-number" aria-hidden="true">1</span><span class="pl-c">#!/bin/bash</span></span>
<span class="line"><span class="line-number" aria-hidden="true">2</span></span>
<span class="line"><span class="line-number" aria-hidden="true">3</span><span class="pl-en">resolve_tags</span>() {</span>
<span class="line"><span class="line-number" aria-hidden="true">4</span>    <span class="pl-k">if</span> [[ <span class="pl-k">-f</span> .env ]]<span class="pl-k">;</span> <span class="pl-k">then</span></span>
<span class="line"><span class="line-number" aria-hidden="true">5</span>        <span class="pl-k">export</span> <span class="pl-s"><span class="pl-pds">$(</span>grep -v <span class="pl-pds">'</span>^#<span class="pl-pds">'</span> .env <span class="pl-k">|</span> xargs<span class="pl-pds">)</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">6</span>    <span class="pl-k">else</span></span>
<span class="line"><span class="line-number" aria-hidden="true">7</span>        <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>.env file not found. Exiting...<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">8</span>        <span class="pl-c1">exit</span> 1</span>
<span class="line"><span class="line-number" aria-hidden="true">9</span>    <span class="pl-k">fi</span></span>
<span class="line"><span class="line-number" aria-hidden="true">10</span></span>
<span class="line"><span class="line-number" aria-hidden="true">11</span>    <span class="pl-k">if</span> [[ <span class="pl-k">-z</span> <span class="pl-smi">$OPEN_AI_KEY</span> ]]<span class="pl-k">;</span> <span class="pl-k">then</span></span>
<span class="line"><span class="line-number" aria-hidden="true">12</span>        <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>OPEN_AI_KEY is not set in the .env file. Exiting...<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">13</span>        <span class="pl-c1">exit</span> 1</span>
<span class="line"><span class="line-number" aria-hidden="true">14</span>    <span class="pl-k">fi</span></span>
<span class="line"><span class="line-number" aria-hidden="true">15</span></span>
<span class="line"><span class="line-number" aria-hidden="true">16</span>    <span class="pl-k">local</span> title=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$1</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">17</span>    <span class="pl-k">local</span> ai_prompt=<span class="pl-s"><span class="pl-pds">"</span>Create a series of topic tags from the following title, reply with only the comma separated tags in the format 'tag, tag, tag' no additional information or text, at least one of these tags must be used (Ai, Analysis, Economy, Engineering, Hacking, Philosophy, Research, Snippets, Tinkering, Privacy). The title is: <span class="pl-smi">$title</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">18</span>    <span class="pl-k">local</span> response=<span class="pl-s"><span class="pl-pds">$(</span>curl https://api.openai.com/v1/chat/completions \</span></span>
<span class="line"><span class="line-number" aria-hidden="true">19</span><span class="pl-s">    -H <span class="pl-pds">"</span>Content-Type: application/json<span class="pl-pds">"</span> \</span></span>
<span class="line"><span class="line-number" aria-hidden="true">20</span><span class="pl-s">    -H <span class="pl-pds">"</span>Authorization: Bearer <span class="pl-smi">$OPEN_AI_KEY</span><span class="pl-pds">"</span> \</span></span>
<span class="line"><span class="line-number" aria-hidden="true">21</span><span class="pl-s">    -d <span class="pl-pds">'</span>{</span></span>
<span class="line"><span class="line-number" aria-hidden="true">22</span><span class="pl-s">        "model": "gpt-4o",</span></span>
<span class="line"><span class="line-number" aria-hidden="true">23</span><span class="pl-s">        "store": true,</span></span>
<span class="line"><span class="line-number" aria-hidden="true">24</span><span class="pl-s">        "messages": [</span></span>
<span class="line"><span class="line-number" aria-hidden="true">25</span><span class="pl-s">            {"role": "user", "content": "<span class="pl-pds">'"</span><span class="pl-smi">$ai_prompt</span><span class="pl-pds">"'</span>"}</span></span>
<span class="line"><span class="line-number" aria-hidden="true">26</span><span class="pl-s">        ]</span></span>
<span class="line"><span class="line-number" aria-hidden="true">27</span><span class="pl-s">        }<span class="pl-pds">'</span> <span class="pl-k">|</span> jq -r <span class="pl-pds">'</span>.choices[0].message.content<span class="pl-pds">')</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">28</span></span>
<span class="line"><span class="line-number" aria-hidden="true">29</span>    <span class="pl-c"># Parse tags from the response of the AI (lowercase all, tags are separated by commas)</span></span>
<span class="line"><span class="line-number" aria-hidden="true">30</span>    <span class="pl-k">local</span> tags=<span class="pl-s"><span class="pl-pds">$(</span>echo <span class="pl-pds">"</span><span class="pl-smi">$response</span><span class="pl-pds">"</span> <span class="pl-k">|</span> tr <span class="pl-pds">'</span>[:upper:]<span class="pl-pds">'</span> <span class="pl-pds">'</span>[:lower:]<span class="pl-pds">'</span> <span class="pl-k">|</span> tr -d <span class="pl-pds">'</span>\"<span class="pl-pds">'</span> <span class="pl-k">|</span> tr -d <span class="pl-pds">"</span>'<span class="pl-pds">")</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">31</span>    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$tags</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">32</span>}</span>
<span class="line"><span class="line-number" aria-hidden="true">33</span></span>
<span class="line"><span class="line-number" aria-hidden="true">34</span><span class="pl-c"># Example usage</span></span>
<span class="line"><span class="line-number" aria-hidden="true">35</span></span>
<span class="line"><span class="line-number" aria-hidden="true">36</span>find <span class="pl-c1">.</span> -type f -name <span class="pl-s"><span class="pl-pds">"</span>*.md<span class="pl-pds">"</span></span> <span class="pl-k">|</span> <span class="pl-k">while</span> <span class="pl-c1">read</span> -r file<span class="pl-k">;</span> <span class="pl-k">do</span></span>
<span class="line"><span class="line-number" aria-hidden="true">37</span>    first_line=<span class="pl-s"><span class="pl-pds">$(</span>head -n 1 <span class="pl-pds">"</span><span class="pl-smi">$file</span><span class="pl-pds">")</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">38</span>    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Processing file: <span class="pl-smi">$file</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">39</span>    <span class="pl-k">if</span> [[ <span class="pl-smi">$first_line</span> <span class="pl-k">!=</span> <span class="pl-s"><span class="pl-pds">"</span>---<span class="pl-pds">"</span></span> <span class="pl-k">&#x26;&#x26;</span> <span class="pl-smi">$first_line</span> <span class="pl-k">==</span> <span class="pl-cce">\#</span><span class="pl-k">*</span> ]]<span class="pl-k">;</span> <span class="pl-k">then</span></span>
<span class="line"><span class="line-number" aria-hidden="true">40</span>        title=<span class="pl-s"><span class="pl-pds">$(</span>echo <span class="pl-pds">"</span><span class="pl-smi">$first_line</span><span class="pl-pds">"</span> <span class="pl-k">|</span> sed <span class="pl-pds">'</span>s/^# //<span class="pl-pds">')</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">41</span>        <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Title: <span class="pl-smi">$title</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">42</span>        tags=<span class="pl-s"><span class="pl-pds">$(</span>resolve_tags <span class="pl-pds">"</span><span class="pl-smi">$title</span><span class="pl-pds">")</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">43</span>        {</span>
<span class="line"><span class="line-number" aria-hidden="true">44</span>            <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>---<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">45</span>            <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>title: '<span class="pl-smi">$title</span>'<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">46</span>            <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>date: '<span class="pl-pds">$(</span>date +<span class="pl-pds">"</span>%Y-%m-%d<span class="pl-pds">")</span>'<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">47</span>            <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>tags: '<span class="pl-smi">$tags</span>'<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">48</span>            <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>---<span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">49</span>            tail -n +2 <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$file</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">50</span>        } <span class="pl-k">></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$file</span>.tmp<span class="pl-pds">"</span></span> <span class="pl-k">&#x26;&#x26;</span> mv <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$file</span>.tmp<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$file</span><span class="pl-pds">"</span></span></span>
<span class="line"><span class="line-number" aria-hidden="true">51</span>    <span class="pl-k">fi</span></span>
<span class="line"><span class="line-number" aria-hidden="true">52</span><span class="pl-k">done</span></span>
</code></pre></div></div></article></main><div class="layout_backToHome__D9QFr"><a href="/plausible-denial">← Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"tagging_markdown_content","contentHtml":"\u003cp\u003eI had a bunch of markdown files filled with notes that I wanted to add to my blog. The challenge was to tag each file with relevant topics. To tackle this, I decided to use a language model and wrote a bash script to automate the tagging process.\u003c/p\u003e\n\u003cp\u003eNow, all my markdown notes are semantically tagged and ready for the blog! However, there's a small hiccup: all the metadata dates are the same, which looks odd. But that's okay — I plan to review and post each blog entry gradually anyway.\u003c/p\u003e\n\u003cdiv class=\"hl hl-bash\"\u003e\u003cdiv class=\"hl-header\"\u003e\u003cdiv class=\"hl-language\"\u003e\u003cspan\u003ebash\u003c/span\u003e\u003c/div\u003e\u003c/div\u003e\u003cpre id=\"MC43NzI0NTI5\" style=\"--hl-line-number-gutter-factor: 2\"\u003e\u003ccode tabindex=\"0\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e1\u003c/span\u003e\u003cspan class=\"pl-c\"\u003e#!/bin/bash\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e3\u003c/span\u003e\u003cspan class=\"pl-en\"\u003eresolve_tags\u003c/span\u003e() {\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e4\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"pl-k\"\u003e-f\u003c/span\u003e .env ]]\u003cspan class=\"pl-k\"\u003e;\u003c/span\u003e \u003cspan class=\"pl-k\"\u003ethen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e5\u003c/span\u003e        \u003cspan class=\"pl-k\"\u003eexport\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003egrep -v \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e^#\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e .env \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e xargs\u003cspan class=\"pl-pds\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e6\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003eelse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e7\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e.env file not found. Exiting...\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e8\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eexit\u003c/span\u003e 1\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e9\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003efi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e10\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e11\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"pl-k\"\u003e-z\u003c/span\u003e \u003cspan class=\"pl-smi\"\u003e$OPEN_AI_KEY\u003c/span\u003e ]]\u003cspan class=\"pl-k\"\u003e;\u003c/span\u003e \u003cspan class=\"pl-k\"\u003ethen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e12\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eOPEN_AI_KEY is not set in the .env file. Exiting...\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e13\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eexit\u003c/span\u003e 1\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e14\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003efi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e15\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e16\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003elocal\u003c/span\u003e title=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$1\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e17\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003elocal\u003c/span\u003e ai_prompt=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eCreate a series of topic tags from the following title, reply with only the comma separated tags in the format 'tag, tag, tag' no additional information or text, at least one of these tags must be used (Ai, Analysis, Economy, Engineering, Hacking, Philosophy, Research, Snippets, Tinkering, Privacy). The title is: \u003cspan class=\"pl-smi\"\u003e$title\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e18\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003elocal\u003c/span\u003e response=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003ecurl https://api.openai.com/v1/chat/completions \\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e19\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e    -H \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eContent-Type: application/json\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e \\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e20\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e    -H \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eAuthorization: Bearer \u003cspan class=\"pl-smi\"\u003e$OPEN_AI_KEY\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e \\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e21\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e    -d \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e22\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e        \"model\": \"gpt-4o\",\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e23\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e        \"store\": true,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e24\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e        \"messages\": [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e25\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e            {\"role\": \"user\", \"content\": \"\u003cspan class=\"pl-pds\"\u003e'\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$ai_prompt\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"'\u003c/span\u003e\"}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e26\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e27\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e        }\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e jq -r \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e.choices[0].message.content\u003cspan class=\"pl-pds\"\u003e')\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e28\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e29\u003c/span\u003e    \u003cspan class=\"pl-c\"\u003e# Parse tags from the response of the AI (lowercase all, tags are separated by commas)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e30\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003elocal\u003c/span\u003e tags=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003eecho \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$response\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e tr \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e[:upper:]\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e[:lower:]\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e tr -d \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e\\\"\u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e tr -d \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e'\u003cspan class=\"pl-pds\"\u003e\")\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e31\u003c/span\u003e    \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$tags\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e32\u003c/span\u003e}\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e33\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e34\u003c/span\u003e\u003cspan class=\"pl-c\"\u003e# Example usage\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e35\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e36\u003c/span\u003efind \u003cspan class=\"pl-c1\"\u003e.\u003c/span\u003e -type f -name \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e*.md\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e \u003cspan class=\"pl-k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eread\u003c/span\u003e -r file\u003cspan class=\"pl-k\"\u003e;\u003c/span\u003e \u003cspan class=\"pl-k\"\u003edo\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e37\u003c/span\u003e    first_line=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003ehead -n 1 \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$file\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\")\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e38\u003c/span\u003e    \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eProcessing file: \u003cspan class=\"pl-smi\"\u003e$file\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e39\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e [[ \u003cspan class=\"pl-smi\"\u003e$first_line\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e!=\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e---\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"pl-smi\"\u003e$first_line\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e==\u003c/span\u003e \u003cspan class=\"pl-cce\"\u003e\\#\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e*\u003c/span\u003e ]]\u003cspan class=\"pl-k\"\u003e;\u003c/span\u003e \u003cspan class=\"pl-k\"\u003ethen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e40\u003c/span\u003e        title=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003eecho \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$first_line\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e|\u003c/span\u003e sed \u003cspan class=\"pl-pds\"\u003e'\u003c/span\u003es/^# //\u003cspan class=\"pl-pds\"\u003e')\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e41\u003c/span\u003e        \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003eTitle: \u003cspan class=\"pl-smi\"\u003e$title\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e42\u003c/span\u003e        tags=\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003eresolve_tags \u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$title\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\")\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e43\u003c/span\u003e        {\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e44\u003c/span\u003e            \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e---\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e45\u003c/span\u003e            \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etitle: '\u003cspan class=\"pl-smi\"\u003e$title\u003c/span\u003e'\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e46\u003c/span\u003e            \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003edate: '\u003cspan class=\"pl-pds\"\u003e$(\u003c/span\u003edate +\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e%Y-%m-%d\u003cspan class=\"pl-pds\"\u003e\")\u003c/span\u003e'\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e47\u003c/span\u003e            \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003etags: '\u003cspan class=\"pl-smi\"\u003e$tags\u003c/span\u003e'\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e48\u003c/span\u003e            \u003cspan class=\"pl-c1\"\u003eecho\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e---\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e49\u003c/span\u003e            tail -n +2 \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$file\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e50\u003c/span\u003e        } \u003cspan class=\"pl-k\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$file\u003c/span\u003e.tmp\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e mv \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$file\u003c/span\u003e.tmp\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003e$file\u003c/span\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e51\u003c/span\u003e    \u003cspan class=\"pl-k\"\u003efi\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan class=\"line-number\" aria-hidden=\"true\"\u003e52\u003c/span\u003e\u003cspan class=\"pl-k\"\u003edone\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Tagging markdown content","date":"2025-01-15","tags":"snippets, tinkering, research"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"tagging_markdown_content"},"buildId":"uMTsqovISolJsx25sdzq8","assetPrefix":"/plausible-denial","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>